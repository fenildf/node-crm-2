extends ../layout

block body
	.page-header 
		h1 Customers&nbsp;
			small Search
	.clear
		.navbar
			.navbar-inner
				form.navbar-search.form-search.pull-left(method="get")
					.input-append
						input.search-query(type="text", placeholder="Search name or postcode", name="q", value=locals.query)
						button.btn(type="submit") Search
				a.btn.btn-default.pull-right(href="/customer") Create new customer
		if customers && customers.length
			table.table.table-striped
				thead
					tr
						th Name
						th Email
						th Address
						th Telephone Number
						th Contact
						th Contact Email
						th Created by
						th Created date
						th Modified by
						th Modified date
						th Keywords
						th
				tbody
					for customer, i in customers
						tr
							td= customer.name
							td= customer.email
							td= customer.addresses[0].fullAddress
							td= customer.telephoneNumber
							td= customer.contacts[0].fullName
							td= customer.contacts[0].email
							td= customer.createdBy.fullName
							td= customer.dateCreated
							td= customer.modifiedBy.fullName
							td= customer.dateModified
							td= customer.keywords
							td: a.edit(href="/customer/#{customer._id}/edit") edit